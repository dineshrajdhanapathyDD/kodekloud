

Questions:
There is a static website running within a container named (nautilus), this container is running on (App Server 1). Suddenly, we started facing some issues with the static website on (App Server 1). Look into the issue to fix the same, you can find more details below:

Container's volume (/usr/local/apache2/htdocs) is mapped with the host's volume (/var/www/html).

The website should run on host port (8080) on (App Server 1) i.e command (curl http://localhost:8080/) should work on (App Server 1).


Solution:  

1. At first login on app server  &  Switch to the root user 

thor@jump_host ~$ ssh tony@stapp01
tony@stapp01's password: Ir0nM@n
[tony@stapp01 ~]$ sudo su -
[sudo] password for tony: Ir0nM@n


2. Run the Below command to check existing docker images 
[root@stapp01 ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
httpd               latest              96a2d0570deb        13 days ago         168MB

3. Run the Below command to  pull the docker image on the server

[root@stapp01 ~]# docker pull httpd:latest
latest: Pulling from library/httpd
Digest: sha256:d7262c0f29a26349d6af45199b2770d499c74d45cee5c47995a1ebb336093088
Status: Image is up to date for httpd:latest
docker.io/library/httpd:latest


5. Run docker container from the image with given name and path

[root@stapp01 ~]# docker run -v /var/www/html:/usr/local/apache2/htdocs -d -it  httpd:latest
1da7bcb8ba732947685a562cae9c9a1a513572113039cac273e457086b8815ed

[root@stapp01 ~]# docker run --name nautilus -v /var/www/html:/usr/local/apache2/htdocs -d -it  httpd:latest
d6afe709b7871afefc1f522e9c0e21161d61cc973a9cf5f44ff39c5211e9464e
error:
docker: Error response from daemon: Conflict. The container name "/nautilus" is already in use by container "53af1735413010d1538c865094d9d9d0d44d5877696235c634e41a40ecb7d89d". You have to remove (or rename) that container to be able to reuse that name.
See 'docker run --help'.

6. Validate the task by login on  docker container and list  /usr/local/apache2/htdocs

[root@stapp01 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS               NAMES
d6afe709b787        httpd:latest        "httpd-foreground"   32 seconds ago      Up 20 seconds       80/tcp              nautilus
[root@stapp01 ~]# docker exec -it d6afe709b787  /bin/bash
root@d6afe709b787:/usr/local/apache2# ls /usr/local/apache2/htdocs
index.html


7.  Click on Finish & Confirm to complete the task successful



new error:
- container 'nautilus' is not running or its configuration was alterted on App Server 1
FAILED test_container_issues.py::test_container_issues - AssertionError: - co...


































thor@jump_host ~$ ssh tony@stapp01
tony@stapp01's password: Ir0nM@n
[tony@stapp01 ~]$ sudo su -
[sudo] password for tony: Ir0nM@n

[root@stapp01 ~]# docker ps -a
CONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                     PORTS               NAMES
bec8370bdddb        httpd               "httpd-foreground"   6 minutes ago       Exited (0) 6 minutes ago                       nautilus

[root@stapp01 ~]# ls /var/www/html
index.html

[root@stapp01 ~]# docker container run -d --name nautilus -p 8080:80 httpd:latest 


[root@stapp01 ~]# docker -v /usr/local/apache2/htdocs
Docker version 19.03.15, build 99e3ed8919


[root@stapp01 ~]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
httpd               latest              96a2d0570deb        7 days ago          168MB
[root@stapp01 ~]# docker run -d --volume /usr/local/apache2/htdocs:/tmp 96a2d0570deb sleep infinity
c2a1067537736678e429a93f73ab05a3036ee197183d8686b0726d4b426582bf


[root@stapp01 ~]# docker run -d --volume /usr/local/apache2/htdocs:/var/www/html 96a2d0570deb sleep infinity
7ee278e99c6e4fd23df5660c9871b3f0071ccab85f49db124bbd32d81e0e83ea
[root@stapp01 ~]# docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
7ee278e99c6e        96a2d0570deb        "sleep infinity"    15 seconds ago      Up 6 seconds        80/tcp              zen_fermi


error happen:

- container 'nautilus' is not running or its configuration was alterted on App Server 1
FAILED test_container_issues.py::test_container_issues - AssertionError: - co...

command line :
docker run -it --name <WHATEVER> -p <LOCAL_PORT>:<CONTAINER_PORT> -v <LOCAL_PATH>:<CONTAINER_PATH> -d <IMAGE>:<TAG>

docker run -v /host/directory:/container/directory -t IMAGE-NAME /bin/bash


